<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Artistic Profile Pic Creator</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            padding: 0;
            margin: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow-y: auto;
        }

        .container {
            background: rgba(255, 255, 255, 0.98);
            padding: 20px;
            min-height: 100vh;
        }

        /* PAGE SYSTEM */
        .page {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* HEADINGS */
        h1 {
            font-size: 18px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0 0 16px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }

        h2 {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
            margin: 0 0 12px 0;
        }

        h3 {
            font-size: 13px;
            font-weight: 600;
            margin: 0 0 10px 0;
            color: #2d3748;
        }

        /* BOXES */
        .box {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 14px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        /* INPUTS */
        input[type="text"],
        input[type="number"],
        select {
            width: 100%;
            padding: 10px;
            font-size: 14px;
            border: 2px solid #cbd5e0;
            border-radius: 6px;
            margin: 4px 0 8px 0;
            transition: border-color 0.2s;
        }

        input[type="text"]:focus,
        input[type="number"]:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
        }

        label {
            display: block;
            font-size: 11px;
            font-weight: 600;
            margin: 8px 0 4px 0;
            color: #4a5568;
        }

        /* BUTTONS */
        button {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            font-size: 14px;
            font-weight: 600;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        button.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        button.primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        button.secondary {
            background: #718096;
            color: white;
        }

        button.secondary:hover:not(:disabled) {
            background: #4a5568;
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* STATUS MESSAGES */
        .status-success {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            font-size: 12px;
            border-left: 4px solid #28a745;
        }

        .status-error {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            font-size: 12px;
            border-left: 4px solid #dc3545;
        }

        /* FEATURE CARDS */
        .feature-card {
            background: white;
            padding: 16px;
            border-radius: 8px;
            margin: 10px 0;
            border: 2px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.2s;
        }

        .feature-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .feature-card h3 {
            margin: 0 0 6px 0;
            color: #2d3748;
        }

        .feature-card p {
            margin: 0;
            font-size: 12px;
            color: #718096;
        }

        /* DIVIDER */
        .divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, #cbd5e0, transparent);
            margin: 16px 0;
        }

        /* LOADING OVERLAY */
        #loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            color: white;
            font-size: 16px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">

        <!-- ================================ -->
        <!-- PAGE 1: LICENSE -->
        <!-- ================================ -->
        <div id="pageLicense" class="page active">
            <h1>üîê License Activation</h1>

            <div class="box">
                <h3>Activate Your Plugin</h3>
                <p style="font-size: 12px; color: #718096; margin: 0 0 12px 0;">
                    Enter your license key to unlock all features
                </p>

                <label for="licenseInput">License Key</label>
                <input
                    type="text"
                    id="licenseInput"
                    placeholder="PS-XXXX-XXXX-XXXX"
                    maxlength="17"
                    oninput="window.app && window.app.formatLicenseInput(this)"
                />

                <button id="activateBtn" class="primary" onclick="window.app && window.app.activateLicense()">
                    Activate License
                </button>

                <div id="status"></div>

                <button id="resetBtn" class="secondary" onclick="window.app && window.app.resetLicense()" style="display:none;">
                    Reset License
                </button>

                <button id="backToHomeBtn" class="primary" onclick="window.app && window.app.showPage('pageHome')" style="display:none;">
                    Back to Home
                </button>

                <div class="divider"></div>

                <p style="font-size: 11px; color: #a0aec0; margin: 0; text-align: center;">
                    Don't have a license? Contact support or purchase one
                </p>
            </div>
        </div>

        <!-- ================================ -->
        <!-- PAGE 2: HOME DASHBOARD -->
        <!-- ================================ -->
        <div id="pageHome" class="page">
            <h1>üé® Artistic Profile Pic Creator</h1>

            <div class="box">
                <h3>Choose a Tool</h3>

                <div class="feature-card" onclick="window.app && window.app.showPage('pageSocial')">
                    <h3>üì± Social Media Posts</h3>
                    <p>Create perfect profile pictures for Instagram, Facebook, Twitter</p>
                </div>

                <div class="feature-card" onclick="window.app && window.app.showPage('pagePassport')">
                    <h3>üé´ Passport Photos</h3>
                    <p>Generate professional passport photos with white background</p>
                </div>

                <div class="feature-card" onclick="window.app && window.app.showPage('pageEffects')">
                    <h3>‚ú® Artistic Effects</h3>
                    <p>Apply filters and effects to enhance your photos</p>
                </div>
            </div>

            <button class="secondary" onclick="window.app && window.app.showPage('pageLicense')">
                Back to License
            </button>
        </div>

        <!-- ================================ -->
        <!-- PAGE 3: SOCIAL MEDIA -->
        <!-- ================================ -->
        <div id="pageSocial" class="page">
            <h1>üì± Social Media Posts</h1>

            <div class="box">
                <h3>Crop Mode</h3>
                <label>Select mode:</label>
                <select id="cropMode">
                    <option value="center">Center Crop</option>
                    <option value="smart">Smart Face Detection</option>
                </select>

                <h3 style="margin-top: 16px;">Output Size</h3>
                <label>Choose platform:</label>
                <select id="outputSize">
                    <option value="1080">üì∏ Instagram (1080x1080)</option>
                    <option value="400">üë§ Facebook (400x400)</option>
                    <option value="180">üê¶ Twitter (180x180)</option>
                    <option value="original">üìè Original Size</option>
                </select>

                <button id="cropBtn" class="primary" onclick="window.app && window.app.createSocialMediaPost()">
                    Crop & Resize
                </button>

                <div id="socialStatus"></div>
            </div>

            <button class="secondary" onclick="window.app && window.app.showPage('pageHome')">
                Back to Home
            </button>
        </div>

        <!-- ================================ -->
        <!-- PAGE 4: PASSPORT PHOTOS -->
        <!-- ================================ -->
        <div id="pagePassport" class="page">
            <h1>üé´ Passport Photos</h1>

            <div class="box">
                <h3>Passport Settings</h3>

                <label>Preset Size:</label>
                <select id="passportPreset">
                    <option value="us" selected>üá∫üá∏ US Passport (51x51mm)</option>
                    <option value="eu">üá™üá∫ EU Passport (35x45mm)</option>
                    <option value="uk">üá¨üáß UK Passport (35x45mm)</option>
                    <option value="india">üáÆüá≥ India Passport (35x45mm)</option>
                    <option value="china">üá®üá≥ China Passport (33x48mm)</option>
                    <option value="canada">üá®üá¶ Canada Passport (35x45mm)</option>
                    <option value="australia">üá¶üá∫ Australia Passport (35x45mm)</option>
                </select>

                <label>Resolution (PPI):</label>
                <input type="number" id="passportResolution" value="300" min="72" max="600">

                <h3 style="margin-top: 16px;">Background Options</h3>
                <label>Background Color (AI-Powered):</label>
                <select id="passportBackground">
                    <option value="none">Keep Original Background</option>
                    <option value="white" selected>‚ö™ White Background (Recommended)</option>
                    <option value="lightgray">‚ö´ Light Gray</option>
                    <option value="lightblue">üîµ Light Blue</option>
                    <option value="gray">‚ö´ Gray</option>
                </select>

                <button id="passportBtn" class="primary" onclick="window.app && window.app.createPassportPhoto()">
                    Create Passport Photo
                </button>

                <div id="passportStatus"></div>

                <div style="background: #e7f3ff; padding: 10px; border-radius: 6px; margin-top: 12px; border-left: 4px solid #2196F3;">
                    <p style="margin: 0; font-size: 11px; color: #0d47a1;">
                        ‚ú® <strong>AI Background Removal:</strong> Select a background color above to automatically remove and replace the background using Photoshop's AI. Requires Photoshop 2020 (v21.0) or later.
                    </p>
                </div>
            </div>

            <button class="secondary" onclick="window.app && window.app.showPage('pageHome')">
                Back to Home
            </button>
        </div>

        <!-- ================================ -->
        <!-- PAGE 5: EFFECTS -->
        <!-- ================================ -->
        <div id="pageEffects" class="page">
            <h1>‚ú® Artistic Effects</h1>

            <div class="box">
                <h3>Choose Effect</h3>

                <label>Effect Type:</label>
                <select id="effectPicker">
                    <option value="vibrant">‚ú® Vibrant Pop</option>
                    <option value="bw">üé≠ Black & White</option>
                    <option value="vintage">üì∑ Vintage Fade</option>
                    <option value="warm">üåÖ Warm Glow</option>
                    <option value="cool">‚ùÑÔ∏è Cool Tone</option>
                </select>

                <button id="applyEffect" class="primary" onclick="window.app && window.app.applyEffect()">
                    Apply Effect
                </button>

                <div id="effectStatus"></div>
            </div>

            <button class="secondary" onclick="window.app && window.app.showPage('pageHome')">
                Back to Home
            </button>
        </div>

    </div>

    <!-- Loading overlay -->
    <div id="loading-overlay" style="display: none;">Processing...</div>

    <!-- ================================ -->
    <!-- LOAD CORE MODULES -->
    <!-- ================================ -->
    <script src="core/logger.js"></script>
    <script src="core/error-handler.js"></script>
    <script src="core/validator.js"></script>
    <script src="core/license-manager.js"></script>

    <!-- LOAD SERVICE MODULES -->
    <script src="services/photoshop-service.js"></script>
    <script src="services/background-service.js"></script>
    <script src="services/social-media-service.js"></script>
    <script src="services/passport-service.js"></script>
    <script src="services/effects-service.js"></script>

    <!-- LOAD UI MODULE -->
    <script src="ui/ui-controller.js"></script>

    <!-- LOAD MAIN APP -->
    <script src="app.js"></script>

    <!-- INITIALIZE APPLICATION -->
    <script>
        // Create and initialize app when DOM is ready
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('DOM Content Loaded - Starting Application');

            try {
                window.app = new App();
                await window.app.initialize();
                console.log('Application ready');
            } catch (error) {
                console.error('Failed to start application', error);
                // Show error in UI instead of alert (UXP doesn't support alert)
                const statusElement = document.getElementById('licenseStatus');
                if (statusElement) {
                    statusElement.innerHTML = '<span style="color: #e53935;">‚ö†Ô∏è Failed to start application. Check console for errors.</span>';
                    statusElement.style.display = 'block';
                }
            }
        });
    </script>

</body>
</html>
